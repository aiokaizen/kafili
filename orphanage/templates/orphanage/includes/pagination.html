{% load template_tags %}

{% if items and number_of_pages > 1 %}
    <nav class="pagination-wrap  justify-content-center mb-25" aria-label="Page navigation example">
        <ul class="pagination">
            {% if previous_page %}
                <li class="page-item">
                    <a class="page-link" href="{{ request.path }}?page=1" tabindex="-1"><<</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="{{ request.path }}?page={{ previous_page }}" tabindex="-1">السابق</a>
                </li>
            {% else %}
                <li class="page-item disabled">
                    <a class="page-link" href="#" tabindex="-1">السابق</a>
                </li>
            {% endif %}

            {% if range|length > 6 and items.number > 4 %}
                <li class="page-item pagination-dots">...</li>
            {% endif %}

            {% for index in range %}
                {% if index == items.number %}
                    <li class="page-item active"><a class="page-link">{{ index }}</a></li>
                {% elif items.number|in_range_3:index %}
                    <li class="page-item"><a class="page-link" href="{{ request.path }}?page={{ index }}">{{ index }}</a></li>
                {% endif %}
            {% endfor %}

            {% if range|length > 6 and items.number < range|length|add:"-3" %}
                <li class="page-item pagination-dots">...</li>
            {% endif %}

            {% if next_page %}
                <li class="page-item">
                    <a class="page-link" href="{{ request.path }}?page={{ next_page }}">التالي</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="{{ request.path }}?page={{ range|length }}" tabindex="-1">>></a>
                </li>
            {% else %}
                <li class="page-item">
                    <a class="page-link">التالي</a>
                </li>
            {% endif %}
        </ul>
    </nav>
{% endif %}